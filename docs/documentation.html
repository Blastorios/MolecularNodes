<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Molecular Nodes - Documentation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./documentation.html">Documentation</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Molecular Nodes</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/BradyAJohnston/MolecularNodes" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
    <a href="https://twitter.com/bradyajohnston" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-twitter"></i></a>
    <a href="https://youtube.com/c/bradyjohnston" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-youtube"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./installation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Installation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./getting-started.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Getting Started</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./examples.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Examples</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./documentation.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Documentation</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./reference/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Python API</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reference/coll.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">coll</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reference/load.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">load</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reference/nodes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">nodes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reference/pkg.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">pkg</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#interface" id="toc-interface" class="nav-link active" data-scroll-target="#interface"><span class="header-section-number">1</span> Interface</a>
  <ul class="collapse">
  <li><a href="#pdb-tab" id="toc-pdb-tab" class="nav-link" data-scroll-target="#pdb-tab"><span class="header-section-number">1.1</span> PDB Tab</a></li>
  <li><a href="#local-file-tab" id="toc-local-file-tab" class="nav-link" data-scroll-target="#local-file-tab"><span class="header-section-number">1.2</span> Local File Tab</a></li>
  <li><a href="#md-trajectory-tab" id="toc-md-trajectory-tab" class="nav-link" data-scroll-target="#md-trajectory-tab"><span class="header-section-number">1.3</span> MD Trajectory Tab</a></li>
  </ul></li>
  <li><a href="#nodes" id="toc-nodes" class="nav-link" data-scroll-target="#nodes"><span class="header-section-number">2</span> Nodes</a>
  <ul class="collapse">
  <li><a href="#properties" id="toc-properties" class="nav-link" data-scroll-target="#properties"><span class="header-section-number">2.1</span> Properties</a></li>
  <li><a href="#styling-nodes" id="toc-styling-nodes" class="nav-link" data-scroll-target="#styling-nodes"><span class="header-section-number">2.2</span> Styling Nodes</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Documentation</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="interface" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Interface</h1>
<p>The Molecular Nodes panel can be accessed in the scene properties tab. This panel can additionally be accessed inside the 3D viewport’s N-panel if enabled in the preferences of Molecular Nodes.</p>
<p><img src="images/CleanShot 2022-05-19 at 13.07.10.png" class="img-fluid"></p>
<p>There are currently three methods for importing structures via Molecular Nodes into Blender.</p>
<p>You can download from the PDB with the PDB tab, open a local <code>.pdb</code> or <code>.mmcif</code> file with the <code>Local File</code> tab, or open a Molecular Dynamics trajectory on the <code>MD Trajectory tab</code>.</p>
<p>Each tab has a set of import options and fields to accept PDB IDs, names and file locations.</p>
<p><img src="images/CleanShot 2022-05-19 at 13.09.28@2x.png" class="img-fluid"></p>
<section id="pdb-tab" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="pdb-tab"><span class="header-section-number">1.1</span> PDB Tab</h2>
<section id="pdb-id" class="level4">
<h4 class="anchored" data-anchor-id="pdb-id">PDB ID:</h4>
<p>Field for the 4-letter PDB ID to be input, and button to start the download and import process.</p>
</section>
<section id="calculate-bonds" class="level4">
<h4 class="anchored" data-anchor-id="calculate-bonds">Calculate Bonds</h4>
<p>Whether or not to try and calculate bond information on the structure during import. Can be very slow for large structures, or if also building a biological assembly. The <code>Cutoff</code> represents the same cutoff value that is used inside of the <a href="https://pymolwiki.org/index.php/Connect_cutoff">PyMol bond detection</a>.</p>
</section>
<section id="build-biological-assembly" class="level4">
<h4 class="anchored" data-anchor-id="build-biological-assembly">Build Biological Assembly</h4>
<p>Whether or not to build the biological assembly, such as the full virus capsid, from the symmetry information that is present inside of the file. Assembly ID chooses which assembly information inside of the file to build from.</p>
</section>
<section id="nanometre-scale" class="level4">
<h4 class="anchored" data-anchor-id="nanometre-scale">Nanometre Scale</h4>
<p>Inside of structure files, the base unit is usually 1 Å, which will become 1 m inside of Blender and 1 nm will become 10 m. To scale things down to a more manageable size we re-scale the structure so that 1 nm will become 1 m.</p>
<p><img src="images/CleanShot 2022-05-19 at 13.12.26@2x.png" class="img-fluid"></p>
</section>
</section>
<section id="local-file-tab" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="local-file-tab"><span class="header-section-number">1.2</span> Local File Tab</h2>
<section id="name-field" class="level4">
<h4 class="anchored" data-anchor-id="name-field">Name Field</h4>
<p>An optional name to be given to the structure on import.</p>
</section>
<section id="file-path" class="level4">
<h4 class="anchored" data-anchor-id="file-path">File Path</h4>
<p>The path to the structure file to be opened.</p>
</section>
<section id="calculate-bonds-1" class="level4">
<h4 class="anchored" data-anchor-id="calculate-bonds-1">Calculate Bonds</h4>
<p>Whether or not to try and calculate bond information on the structure during import. Can be very slow for large structures, or if also building a biological assembly. The <code>Cutoff</code> represents the same cutoff value that is used inside of the <a href="https://pymolwiki.org/index.php/Connect_cutoff">PyMol bond detection</a>.</p>
</section>
<section id="build-biological-assembly-1" class="level4">
<h4 class="anchored" data-anchor-id="build-biological-assembly-1">Build Biological Assembly</h4>
<p>Whether or not to build the biological assembly, such as the full virus capsid, from the symmetry information that is present inside of the file. Assembly ID chooses which assembly information inside of the file to build from.</p>
</section>
<section id="nanometre-scale-1" class="level4">
<h4 class="anchored" data-anchor-id="nanometre-scale-1">Nanometre Scale</h4>
<p>Inside of structure files, the base unit is usually 1 Å, which will become 1 m inside of Blender and 1 nm will become 10 m. To scale things down to a more manageable size we re-scale the structure so that 1 nm will become 1 m.</p>
<p><img src="images/CleanShot 2022-05-19 at 13.19.58@2x.png" class="img-fluid"></p>
</section>
</section>
<section id="md-trajectory-tab" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="md-trajectory-tab"><span class="header-section-number">1.3</span> MD Trajectory Tab</h2>
<section id="name-field-1" class="level4">
<h4 class="anchored" data-anchor-id="name-field-1">Name Field</h4>
<p>An optional name to be given to the structure on import.</p>
</section>
<section id="topology-file-path" class="level4">
<h4 class="anchored" data-anchor-id="topology-file-path">Topology File Path</h4>
<p>The file path to the toplogy file for import. See the <a href="https://docs.mdanalysis.org/stable/documentation_pages/topology/init.html#supported-topology-formats">table of supported topology formats</a> for the formats that should be importable by Molecular Nodes.</p>
</section>
<section id="trajectory-file-path" class="level4">
<h4 class="anchored" data-anchor-id="trajectory-file-path">Trajectory File Path</h4>
<p>The file path to the trajectory file for import. See the <a href="https://docs.mdanalysis.org/stable/documentation_pages/coordinates/init.html#id2">table of supported trajectory formats</a> for the formats that should be importable by Molecular Nodes.</p>
</section>
<section id="frame-import-options" class="level4">
<h4 class="anchored" data-anchor-id="frame-import-options">Frame Import Options</h4>
<ul>
<li><p>Start Frame: The first possible frame from the coordinate file to be imported into Blender</p></li>
<li><p>Interval: Imports every <em>n</em> th frame from the trajectory. 1 will import all frames from the trajectory.</p></li>
<li><p>End Frame: The last possible frame from the coordinate file to be imported into Blender.</p></li>
</ul>
</section>
<section id="nanometre-scale-2" class="level4">
<h4 class="anchored" data-anchor-id="nanometre-scale-2">Nanometre Scale</h4>
<p>Inside of structure files, the base unit is usually 1 Å, which will become 1 m inside of Blender and 1 nm will become 10 m. To scale things down to a more manageable size we re-scale the structure so that 1 nm will become 1 m.</p>
<p><img src="images/CleanShot 2022-05-19 at 13.21.32@2x.png" class="img-fluid"></p>
</section>
</section>
</section>
<section id="nodes" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Nodes</h1>
<section id="properties" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="properties"><span class="header-section-number">2.1</span> Properties</h2>
<section id="atomic-properties" class="level3" data-number="2.1.1">
<h3 data-number="2.1.1" class="anchored" data-anchor-id="atomic-properties"><span class="header-section-number">2.1.1</span> Atomic Properties</h3>
<p>The <code>MOL_prop_setup</code> node associates all of the different atomic properties with their corresponding atoms in the structure.</p>
<section id="required-inputs" class="level4">
<h4 class="anchored" data-anchor-id="required-inputs">Required Inputs</h4>
<ul>
<li><p><strong>Atoms:</strong> mesh vertices or point-cloud that are the <code>XYZ</code> locations of the atoms.</p></li>
<li><p><strong>Properties Collections:</strong> The collection that contains the <code>NAME_properties_1</code> models that were imported alongside the structure.</p></li>
</ul>
</section>
<section id="optional-inputs" class="level4">
<h4 class="anchored" data-anchor-id="optional-inputs">Optional Inputs:</h4>
<p>A boolean switch for each of the atomic properties. By default the properties are enabled, but they can be disable if required to provide a slight performance improvement if not required.</p>
</section>
<section id="outputs" class="level4">
<h4 class="anchored" data-anchor-id="outputs">Outputs</h4>
<ul>
<li><p><strong>Atoms (</strong>mesh vertices or point-cloud)<strong>:</strong> that are the <code>XYZ</code> locations of the atoms, that also have <em>named attributes</em> for each of the atomic properties that were selected for set up.</p></li>
<li><p><strong>atomic_number</strong> (integer field): integer number corresponding to the atomic number of the atom. Defaults to 0 if <em>atomic_number</em> cannot be determined.</p></li>
<li><p><strong>chain_number</strong> (integer field): integer number corresponding to the chain that the atom belongs to. Chains will be sorted into alphabetical order, then given a corresponding integer number starting from 1. Defaults to 0 if <em>chain_number</em> cannot be determined.</p></li>
<li><p><strong>atom_name_number</strong> (integer field): integer number corresponding to the name of the atom within the structure (“CA” for the alpha carbon). Defaults to 0 if <em>atom_name_number</em> cannot be determined.</p></li>
<li><p><strong>AA_sequence_number</strong> (integer field): integer number corresponding to the sequence number of the amino acid in the structure that the atom belongs to. For LYS32 the <em>AA_sequence_number</em> will be 32. Defaults to 0 if <em>AA_sequence_number</em>&nbsp;cannot be determined.</p></li>
<li><p><strong>AA_name</strong> (integer field): integer number corresponding to the different residue names. Amino acids are numbered 1-20 based on alphabetical order. See the <code>MOL_sel_AA_name</code> node for the corresponding order.</p></li>
<li><p><strong>atom_index</strong> (integer field): integer number corresponding to the order of the atom within the structure file.</p></li>
<li><p><strong>B_factor</strong> (float field): a float number corresponding to the value that was present in the B factor column, also known as the <em>temperature factor</em>.</p></li>
<li><p><strong>is_backbone</strong> (boolean field): a boolean value (TRUE or FALSE, 1 or 0) as to whether or not the atom is part of the backbone of the protein.</p></li>
<li><p><strong>is_alpha_carbon</strong> (boolean field): a boolean value (TRUE or FALSE, 1 or 0) as to whether or not the atom is an <em>alpha carbon</em> of the amino acid.</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/paste-781B1B8E.png" class="img-fluid figure-img"></p>
</figure>
</div>
</section>
</section>
</section>
<section id="styling-nodes" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="styling-nodes"><span class="header-section-number">2.2</span> Styling Nodes</h2>
<section id="style-ribbon" class="level3" data-number="2.2.1">
<h3 data-number="2.2.1" class="anchored" data-anchor-id="style-ribbon"><span class="header-section-number">2.2.1</span> Style Ribbon</h3>
<p>This node uses the <code>is_alpha_carbon</code> property and the <code>chain_number</code> properties to generate a ribbon-representation of the structure as a mesh. Options are available for the radius, smoothness and the resolution of the ribbon.</p>
<section id="required-inputs-1" class="level4">
<h4 class="anchored" data-anchor-id="required-inputs-1">Required Inputs</h4>
<ul>
<li><strong>Atoms</strong> (mesh vertices or point cloud): atoms that contain at least the <em>is_alpha_carbon</em>&nbsp;named attribute and the <em>chain_number</em>&nbsp;attribute to ensure the ribbons are separated by chain.</li>
</ul>
</section>
<section id="outputs-1" class="level4">
<h4 class="anchored" data-anchor-id="outputs-1">Outputs</h4>
<ul>
<li><p><strong>Ribbon</strong> (mesh): a mesh that is the ribbon representation of the structure.</p></li>
<li><p><strong>Curve</strong> (spline / curve): a curve that goes through all of the alpha carbons in the structure, that is used to build the final ribbon mesh.</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/paste-84C866C3.png" class="img-fluid figure-img"></p>
</figure>
</div>


</section>
</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">This site is built with ❤️ and <a href="https://quarto.org/">Quarto</a>.</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>